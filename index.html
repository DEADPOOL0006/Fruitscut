<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Interest Calculator (Months)</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background-color: #121212;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
  }
.container {
  background-color: #1e1e1e;
  padding: 50px 60px;
  border-radius: 12px;
  max-width: 1100px;
  width: 90%;
  border: 1px solid #00ffaa33;
  font-size: 20px;
  line-height: 1.6;
  transition: max-width 0.4s ease, padding 0.4s ease;
}

@media (max-width: 900px) {
  .container {
    max-width: 95%;
    padding: 35px 40px;
    font-size: 18px;
  }
}

@media (max-width: 600px) {
  .container {
    max-width: 95%;
    padding: 25px 20px;
    font-size: 16px;
  }
}


  h2 {
    text-align: center;
    color: #00ffaa;
    margin-bottom: 24px;
  }
  label {
    display: block;
    margin-top: 16px;
    font-weight: bold;
  }
  input, select {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    font-size: 16px;
    border-radius: 6px;
    border: none;
    background-color: #333;
    color: #fff;
  }
  .date-row {
    display: flex;
    justify-content: space-between;
    gap: 10px;
  }
  .date-row select {
    flex: 1;
  }
  .buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 24px;
  }
  button {
    padding: 10px;
    width: 48%;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #calcBtn {
    background-color: #00ffaa;
    color: #000;
  }
  #calcBtn:disabled {
    background-color: #555;
    cursor: not-allowed;
  }
  #resetBtn {
    background-color: #ff4d4d;
    color: #fff;
  }
  #result {
    margin-top: 24px;
    font-size: 18px;
    font-weight: bold;
    white-space: pre-line;
    color: #ffffff;
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transition: opacity 0.5s ease, max-height 0.5s ease;
  }
  #result.visible {
    opacity: 1;
    max-height: 500px; /* enough height for text */
  }
  #words {
    font-size: 14px;
    color: #ccc;
    margin-top: 4px;
    min-height: 20px;
  }
</style>
</head>
<body>
<div class="container">
  <h2>Interest Calculator (Months)</h2>

  <label for="principal">Principal (₹):</label>
  <input type="text" id="principal" placeholder="Enter amount" autocomplete="off" />
  <div id="words"></div>

  <label for="rate">Interest Rate (₹ per month):</label>
  <input type="number" id="rate" step="0.01" placeholder="e.g. 2" autocomplete="off" />

  <label>Start Date:</label>
  <div class="date-row">
    <select id="startDay"></select>
    <select id="startMonth"></select>
    <select id="startYear"></select>
  </div>

  <label>End Date:</label>
  <div class="date-row">
    <select id="endDay"></select>
    <select id="endMonth"></select>
    <select id="endYear"></select>
  </div>

  <div class="buttons">
    <button id="calcBtn" disabled>Calculate</button>
    <button id="resetBtn">Reset</button>
  </div>

  <div id="result"></div>
</div>

<script>

const principalInput = document.getElementById("principal");
const wordsDiv = document.getElementById("words");
const resultDiv = document.getElementById("result");
const calcBtn = document.getElementById("calcBtn");

const startDay = document.getElementById("startDay");
const startMonth = document.getElementById("startMonth");
const startYear = document.getElementById("startYear");

const endDay = document.getElementById("endDay");
const endMonth = document.getElementById("endMonth");
const endYear = document.getElementById("endYear");

function formatIndianNumber(x) {
  x = x.replace(/,/g, '');
  if (x === '') return '';
  let lastThree = x.slice(-3);
  let other = x.slice(0, -3);
  if (other !== '') lastThree = ',' + lastThree;
  return other.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree;
}

function numberToWords(num) {
  const ones = ["", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"];
  const tens = ["", "", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];
  const teens = ["Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"];

  if (num === 0) return "Zero";

  function convert(n) {
    if (n < 10) return ones[n];
    if (n >= 10 && n < 20) return teens[n - 10];
    if (n < 100) return tens[Math.floor(n / 10)] + " " + ones[n % 10];
    if (n < 1000) return ones[Math.floor(n / 100)] + " Hundred " + convert(n % 100);
    if (n < 100000) return convert(Math.floor(n / 1000)) + " Thousand " + convert(n % 1000);
    if (n < 10000000) return convert(Math.floor(n / 100000)) + " Lakh " + convert(n % 100000);
    return convert(Math.floor(n / 10000000)) + " Crore " + convert(n % 10000000);
  }

  return convert(num).trim();
}

principalInput.addEventListener("input", () => {
  let raw = principalInput.value.replace(/,/g, '');
  if (!/^\d*$/.test(raw)) { // only allow digits
    raw = raw.replace(/\D/g, '');
  }
  principalInput.value = formatIndianNumber(raw);
  let numeric = parseInt(raw) || 0;
  wordsDiv.innerText = numeric ? numberToWords(numeric) : '';
  validateInputs();
});

function populateDateSelects() {
  const daySelects = [startDay, endDay];
  const monthSelects = [startMonth, endMonth];
  const yearSelects = [startYear, endYear];

  daySelects.forEach(sel => sel.options.length = 0);
  monthSelects.forEach(sel => sel.options.length = 0);
  yearSelects.forEach(sel => sel.options.length = 0);

  for (let d = 1; d <= 31; d++) {
    daySelects.forEach(sel => sel.add(new Option(d, d)));
  }

  const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
  for (let m = 0; m < 12; m++) {
    monthSelects.forEach(sel => sel.add(new Option(monthNames[m], m)));
  }

  const currentYear = new Date().getFullYear();
  for (let y = currentYear - 50; y <= currentYear + 10; y++) {
    yearSelects.forEach(sel => sel.add(new Option(y, y)));
  }
}

function setDefaultDates() {
  const today = new Date();
  startDay.value = today.getDate();
  startMonth.value = today.getMonth();
  startYear.value = today.getFullYear();

  endDay.value = today.getDate();
  endMonth.value = today.getMonth();
  endYear.value = today.getFullYear();
}

// Calculate difference in years, months, days between two dates
function dateDiffYMD(start, end) {
  let years = end.getFullYear() - start.getFullYear();
  let months = end.getMonth() - start.getMonth();
  let days = end.getDate() - start.getDate();

  if (days < 0) {
    months -= 1;
    days += 30; // assuming 30 days in a month for calculation
  }
  if (months < 0) {
    years -= 1;
    months += 12;
  }
  return { years, months, days };
}

function validateInputs() {
  const principalRaw = principalInput.value.replace(/,/g, '');
  const rate = document.getElementById("rate").value;
  const validPrincipal = /^\d+$/.test(principalRaw) && parseInt(principalRaw) > 0;
  const validRate = !isNaN(rate) && parseFloat(rate) > 0;
  const startValid = startDay.value && startMonth.value !== '' && startYear.value;
  const endValid = endDay.value && endMonth.value !== '' && endYear.value;

  calcBtn.disabled = !(validPrincipal && validRate && startValid && endValid);
}

calcBtn.addEventListener("click", () => {
  const principal = parseInt(principalInput.value.replace(/,/g, ''));
  const rate = parseFloat(document.getElementById("rate").value);

  const sDate = new Date(parseInt(startYear.value), parseInt(startMonth.value), parseInt(startDay.value));
  const eDate = new Date(parseInt(endYear.value), parseInt(endMonth.value), parseInt(endDay.value));

  if (eDate < sDate) {
    resultDiv.style.color = 'red';
    resultDiv.innerText = "Error: End date must be after start date.";
    resultDiv.classList.add('visible');
    return;
  }

  const diff = dateDiffYMD(sDate, eDate);
  const totalMonths = diff.years * 12 + diff.months;

  // Interest for full months (years + months)
  const interestMonths = (principal * totalMonths * rate) / 100;

  // Interest for remaining days (daily interest, assuming 30 days/month)
  const interestDays = (principal * rate * diff.days) / (100 * 30);

  const totalInterest = interestMonths + interestDays;
  const finalAmount = principal + totalInterest;

  resultDiv.style.color = '#00ffaa';
  resultDiv.innerText =
    `Principal: ₹${formatIndianNumber(principal.toString())}\n\n` +
    `Duration: ${diff.years} Years, ${diff.months} Months, ${diff.days} Days\n\n` +
    `Interest: ₹${totalInterest.toFixed(2)}\n\n` +
    `Final Amount: ₹${finalAmount.toFixed(2)}`;
  resultDiv.classList.add('visible');
});

document.getElementById("rate").addEventListener("input", validateInputs);
[startDay, startMonth, startYear, endDay, endMonth, endYear].forEach(sel => sel.addEventListener("change", validateInputs));

document.getElementById("resetBtn").addEventListener("click", () => {
  principalInput.value = '';
  wordsDiv.innerText = '';
  document.getElementById("rate").value = '';
  setDefaultDates();
  resultDiv.innerText = '';
  resultDiv.classList.remove('visible');
  calcBtn.disabled = true;
});

populateDateSelects();
setDefaultDates();
validateInputs();

</script>
</body>
</html>
